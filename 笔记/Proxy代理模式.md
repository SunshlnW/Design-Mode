# Proxy代理模式

## 接口隔离模式

1. 在组建构建过程中，某些接口之间直接的依赖常常会带来很多问题、甚至根本无法实现。采用添加一层**间接**（稳定）接口，来隔离本来互相紧密关联的接口是一种常见的解决方案。
2. 典型模式
    * Facade
    * Proxy
    * Adapter
    * Mediator

## 动机（Motivation）

1. 在面向对象系统中，有些对象由于某种原因（比如**对象创建的开销很大**，或者**某些操作需要安全控制**，或者需要进程外的访问等），直接访问会给使用者、或者系统结构带来很多麻烦。
2. 如何在不失去**透明（一致性）操作对象**的同时来**管理/控制**这些对象特有的复杂性？增加一层间接层是软件开发中常见的解决方式。

## 模式定义

为其他对象提供一种代理以控制（隔离，使用接口）对这个对象的访问。
                                                ---《设计模式》GoF

## 结构（Structure）

![20200102205355.png](https://raw.githubusercontent.com/SunshlnW/Design-Mode/master/image/Proxy%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/20200102205355.png)

代理类和实际类使用同样的接口，实际项目中，代理类的实现可能会很麻烦，比如分布式系统，需要使用网络协议来对其它机器上数据的访问。

## 要点总结

1. “增加一层间接层”是软件系统中对许多复杂问题的一种常见解决方法。在面向对象系统中，直接使用某些对象会带来许多问题，作为间接层的proxy对象便是解决这一问题的常用手段。
2. 具体proxy设计模式的实现方法、实现粒度都相差很大，有些可能对单个对象做细粒度的控制，如copy-on-write技术，有些可能对组件模块提供抽象代理层，在建构层次对对象做proxy。
3. Proxy并不一定要求保持接口完整的一致性，只要能够实现间接控制，有时候损及一些透明性是可以接受的。
